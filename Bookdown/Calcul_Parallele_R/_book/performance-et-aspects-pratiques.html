<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>PERFORMANCE ET ASPECTS PRATIQUES | Calcul_Parallele_R.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="PERFORMANCE ET ASPECTS PRATIQUES | Calcul_Parallele_R.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="PERFORMANCE ET ASPECTS PRATIQUES | Calcul_Parallele_R.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="patterns-essentiels.html"/>
<link rel="next" href="bonnes-pratiques.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="section.html"><a href="section.html"><i class="fa fa-check"></i>.</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#contexte-et-motivations-ayant-donné-lieu-au-calcul-parallele"><i class="fa fa-check"></i>1- Contexte et motivations ayant donné lieu au calcul parallele</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#loi-de-moore-et-plafonnement-des-fréquences-cpu"><i class="fa fa-check"></i>2- Loi de Moore et plafonnement des fréquences CPU</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="présentation-du-calcul-parallele.html"><a href="présentation-du-calcul-parallele.html"><i class="fa fa-check"></i>Présentation du calcul parallele</a>
<ul>
<li class="chapter" data-level="" data-path="présentation-du-calcul-parallele.html"><a href="présentation-du-calcul-parallele.html#définition"><i class="fa fa-check"></i>Définition</a></li>
<li class="chapter" data-level="" data-path="présentation-du-calcul-parallele.html"><a href="présentation-du-calcul-parallele.html#comparaison-calcul-parallele-vs-calcul-sequentielle"><i class="fa fa-check"></i>Comparaison calcul parallele vs calcul sequentielle</a></li>
<li class="chapter" data-level="" data-path="présentation-du-calcul-parallele.html"><a href="présentation-du-calcul-parallele.html#types-de-parallélisme"><i class="fa fa-check"></i>Types de parallélisme</a>
<ul>
<li class="chapter" data-level="" data-path="présentation-du-calcul-parallele.html"><a href="présentation-du-calcul-parallele.html#parallélisme-des-données-vs-parallélisme-des-taches"><i class="fa fa-check"></i>Parallélisme des données vs parallélisme des taches</a>
<ul>
<li class="chapter" data-level="" data-path="présentation-du-calcul-parallele.html"><a href="présentation-du-calcul-parallele.html#parallélisme-de-données"><i class="fa fa-check"></i>Parallélisme de données</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="présentation-du-calcul-parallele.html"><a href="présentation-du-calcul-parallele.html#parallélisme-de-tâches"><i class="fa fa-check"></i>Parallélisme de tâches</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="présentation-du-calcul-parallele.html"><a href="présentation-du-calcul-parallele.html#parallélisme-distribué-et-parallélisme-partagé"><i class="fa fa-check"></i>Parallélisme distribué et parallélisme partagé</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="concepts-fondamentaux.html"><a href="concepts-fondamentaux.html"><i class="fa fa-check"></i>Concepts fondamentaux</a>
<ul>
<li class="chapter" data-level="" data-path="concepts-fondamentaux.html"><a href="concepts-fondamentaux.html#coeurs-du-processeur"><i class="fa fa-check"></i>Coeurs du Processeur</a></li>
<li class="chapter" data-level="" data-path="concepts-fondamentaux.html"><a href="concepts-fondamentaux.html#threads-ou-processeurs-logiques"><i class="fa fa-check"></i>Threads (ou Processeurs Logiques)</a></li>
<li class="chapter" data-level="" data-path="concepts-fondamentaux.html"><a href="concepts-fondamentaux.html#hyper-threading"><i class="fa fa-check"></i>Hyper-threading</a>
<ul>
<li class="chapter" data-level="" data-path="concepts-fondamentaux.html"><a href="concepts-fondamentaux.html#lien-entre-coeurs-threads-et-calcul-parallele"><i class="fa fa-check"></i>Lien entre Coeurs, Threads et calcul parallele</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="concepts-fondamentaux.html"><a href="concepts-fondamentaux.html#programme-maître-et-son-rôle-dans-le-calcul-parallèle"><i class="fa fa-check"></i>Programme Maître et son rôle dans le calcul parallèle</a>
<ul>
<li class="chapter" data-level="" data-path="concepts-fondamentaux.html"><a href="concepts-fondamentaux.html#cluster-et-worker"><i class="fa fa-check"></i>Cluster et worker</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="packages-et-fonctions-de-base-du-calcul-parallele.html"><a href="packages-et-fonctions-de-base-du-calcul-parallele.html"><i class="fa fa-check"></i>Packages et fonctions de base du calcul parallele</a>
<ul>
<li class="chapter" data-level="" data-path="packages-et-fonctions-de-base-du-calcul-parallele.html"><a href="packages-et-fonctions-de-base-du-calcul-parallele.html#package-parallel"><i class="fa fa-check"></i>1. Package <strong>parallel</strong></a></li>
<li class="chapter" data-level="" data-path="packages-et-fonctions-de-base-du-calcul-parallele.html"><a href="packages-et-fonctions-de-base-du-calcul-parallele.html#package-tictoc"><i class="fa fa-check"></i>2. Package <strong>tictoc</strong></a></li>
<li class="chapter" data-level="" data-path="packages-et-fonctions-de-base-du-calcul-parallele.html"><a href="packages-et-fonctions-de-base-du-calcul-parallele.html#package-foreach-doparallel"><i class="fa fa-check"></i>3. Package <strong>foreach + doParallel</strong></a></li>
<li class="chapter" data-level="" data-path="packages-et-fonctions-de-base-du-calcul-parallele.html"><a href="packages-et-fonctions-de-base-du-calcul-parallele.html#packages-future-et-future.apply"><i class="fa fa-check"></i>4. Packages <strong>future</strong> et <strong>future.apply</strong></a></li>
<li class="chapter" data-level="" data-path="packages-et-fonctions-de-base-du-calcul-parallele.html"><a href="packages-et-fonctions-de-base-du-calcul-parallele.html#package-snow-simple-network-of-workstations"><i class="fa fa-check"></i>5. Package <strong>snow</strong> (Simple Network of Workstations)</a></li>
<li class="chapter" data-level="" data-path="packages-et-fonctions-de-base-du-calcul-parallele.html"><a href="packages-et-fonctions-de-base-du-calcul-parallele.html#package-snowft"><i class="fa fa-check"></i>6. Package <strong>snowFT</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="patterns-essentiels.html"><a href="patterns-essentiels.html"><i class="fa fa-check"></i>Patterns essentiels</a>
<ul>
<li class="chapter" data-level="" data-path="patterns-essentiels.html"><a href="patterns-essentiels.html#fork-join"><i class="fa fa-check"></i>Fork-join</a></li>
<li class="chapter" data-level="" data-path="patterns-essentiels.html"><a href="patterns-essentiels.html#map-reduce"><i class="fa fa-check"></i>Map Reduce</a></li>
<li class="chapter" data-level="" data-path="patterns-essentiels.html"><a href="patterns-essentiels.html#divide-conquer"><i class="fa fa-check"></i>Divide &amp; Conquer</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="performance-et-aspects-pratiques.html"><a href="performance-et-aspects-pratiques.html"><i class="fa fa-check"></i>PERFORMANCE ET ASPECTS PRATIQUES</a>
<ul>
<li class="chapter" data-level="" data-path="performance-et-aspects-pratiques.html"><a href="performance-et-aspects-pratiques.html#métriques-de-base"><i class="fa fa-check"></i>Métriques de base</a>
<ul>
<li class="chapter" data-level="" data-path="performance-et-aspects-pratiques.html"><a href="performance-et-aspects-pratiques.html#speedup"><i class="fa fa-check"></i>Speedup</a></li>
<li class="chapter" data-level="" data-path="performance-et-aspects-pratiques.html"><a href="performance-et-aspects-pratiques.html#efficacité"><i class="fa fa-check"></i>Efficacité</a></li>
<li class="chapter" data-level="" data-path="performance-et-aspects-pratiques.html"><a href="performance-et-aspects-pratiques.html#scalabilité"><i class="fa fa-check"></i>Scalabilité</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="performance-et-aspects-pratiques.html"><a href="performance-et-aspects-pratiques.html#défis-et-optimisation"><i class="fa fa-check"></i>Défis et optimisation</a>
<ul>
<li class="chapter" data-level="" data-path="performance-et-aspects-pratiques.html"><a href="performance-et-aspects-pratiques.html#overhead-surcharge"><i class="fa fa-check"></i>Overhead (surcharge)</a></li>
<li class="chapter" data-level="" data-path="performance-et-aspects-pratiques.html"><a href="performance-et-aspects-pratiques.html#synchronisation"><i class="fa fa-check"></i>2. Synchronisation</a></li>
<li class="chapter" data-level="" data-path="performance-et-aspects-pratiques.html"><a href="performance-et-aspects-pratiques.html#surcharge-mémoire"><i class="fa fa-check"></i>3. Surcharge mémoire</a></li>
<li class="chapter" data-level="" data-path="performance-et-aspects-pratiques.html"><a href="performance-et-aspects-pratiques.html#communication-interprocessus"><i class="fa fa-check"></i>4. Communication inter‑processus</a></li>
<li class="chapter" data-level="" data-path="performance-et-aspects-pratiques.html"><a href="performance-et-aspects-pratiques.html#sécurité-des-données-parallélisme-distribué"><i class="fa fa-check"></i>5. Sécurité des données (parallélisme distribué)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="bonnes-pratiques.html"><a href="bonnes-pratiques.html"><i class="fa fa-check"></i>Bonnes pratiques</a>
<ul>
<li class="chapter" data-level="" data-path="bonnes-pratiques.html"><a href="bonnes-pratiques.html#a-ne-pas-paralléliser-des-tâches-trop-légères"><i class="fa fa-check"></i>a) Ne pas paralléliser des tâches trop légères</a></li>
<li class="chapter" data-level="" data-path="bonnes-pratiques.html"><a href="bonnes-pratiques.html#b-trouver-le-bon-équilibre-entre-nombre-de-cœurs-et-taille-de-tâche"><i class="fa fa-check"></i>b) Trouver le bon équilibre entre nombre de cœurs et taille de tâche</a></li>
<li class="chapter" data-level="" data-path="bonnes-pratiques.html"><a href="bonnes-pratiques.html#c-optimisation-de-la-mémoire-et-du-cpu"><i class="fa fa-check"></i>c) Optimisation de la mémoire et du CPU</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i>Conclusion</a></li>
<li class="chapter" data-level="" data-path="références.html"><a href="références.html"><i class="fa fa-check"></i>Références</a>
<ul>
<li class="chapter" data-level="" data-path="références.html"><a href="références.html#documentation-officielle-et-tutoriels"><i class="fa fa-check"></i>Documentation officielle et tutoriels</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="performance-et-aspects-pratiques" class="section level1 hasAnchor">
<h1>PERFORMANCE ET ASPECTS PRATIQUES<a href="performance-et-aspects-pratiques.html#performance-et-aspects-pratiques" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="métriques-de-base" class="section level2 hasAnchor">
<h2>Métriques de base<a href="performance-et-aspects-pratiques.html#métriques-de-base" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="speedup" class="section level3 hasAnchor">
<h3>Speedup<a href="performance-et-aspects-pratiques.html#speedup" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Le speedup se définit comme le ratio du temps d’exécution d’une tâche en mode séquentiel (T₁) sur le temps en mode parallèle (Tₚ) :
<span class="math display">\[
\text{Speedup} = \frac{T_1}{T_p}
\]</span>
— Speedup pour une tache légère (pour montrer que dans ce cas, le calcul parallele est plus couteux)</p>
<p>Ici on utilise une fonction qui calcule la somme des carrés des entiers de 1 à 10 000 suivant les methodes parallele et sequentielle.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="performance-et-aspects-pratiques.html#cb33-1" tabindex="-1"></a><span class="fu">library</span>(parallel)</span>
<span id="cb33-2"><a href="performance-et-aspects-pratiques.html#cb33-2" tabindex="-1"></a><span class="fu">library</span>(tictoc)</span>
<span id="cb33-3"><a href="performance-et-aspects-pratiques.html#cb33-3" tabindex="-1"></a></span>
<span id="cb33-4"><a href="performance-et-aspects-pratiques.html#cb33-4" tabindex="-1"></a><span class="co"># Fonction séquentielle</span></span>
<span id="cb33-5"><a href="performance-et-aspects-pratiques.html#cb33-5" tabindex="-1"></a>tache_sequentielle <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">n =</span> <span class="fl">1e4</span>) {</span>
<span id="cb33-6"><a href="performance-et-aspects-pratiques.html#cb33-6" tabindex="-1"></a>  <span class="fu">sum</span>((<span class="dv">1</span><span class="sc">:</span>n)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb33-7"><a href="performance-et-aspects-pratiques.html#cb33-7" tabindex="-1"></a>}</span>
<span id="cb33-8"><a href="performance-et-aspects-pratiques.html#cb33-8" tabindex="-1"></a></span>
<span id="cb33-9"><a href="performance-et-aspects-pratiques.html#cb33-9" tabindex="-1"></a><span class="co"># Fonction parallèle</span></span>
<span id="cb33-10"><a href="performance-et-aspects-pratiques.html#cb33-10" tabindex="-1"></a>tache_parallele <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">n =</span> <span class="fl">1e4</span>, <span class="at">coeurs =</span> <span class="dv">2</span>) {</span>
<span id="cb33-11"><a href="performance-et-aspects-pratiques.html#cb33-11" tabindex="-1"></a>  cl <span class="ot">&lt;-</span> <span class="fu">makeCluster</span>(coeurs)  <span class="co"># Création d&#39;un cluster de travail avec un nombre spécifié</span></span>
<span id="cb33-12"><a href="performance-et-aspects-pratiques.html#cb33-12" tabindex="-1"></a>  <span class="fu">clusterExport</span>(cl, <span class="at">varlist =</span> <span class="st">&quot;n&quot;</span>)  <span class="co"># Exporter la variable &#39;n&#39; dans les processus du cluster</span></span>
<span id="cb33-13"><a href="performance-et-aspects-pratiques.html#cb33-13" tabindex="-1"></a>  resultat <span class="ot">&lt;-</span> <span class="fu">parLapply</span>(cl, <span class="fu">split</span>(<span class="dv">1</span><span class="sc">:</span>n, <span class="fu">cut</span>(<span class="dv">1</span><span class="sc">:</span>n, coeurs)), <span class="cf">function</span>(x) <span class="fu">sum</span>(x<span class="sc">^</span><span class="dv">2</span>))  <span class="co"># Calcul parallèle des carrés, chaque sous-ensemble &#39;x&#39; est traité sur un cœur</span></span>
<span id="cb33-14"><a href="performance-et-aspects-pratiques.html#cb33-14" tabindex="-1"></a>  <span class="fu">stopCluster</span>(cl)  <span class="co"># Arrêter le cluster une fois le calcul terminé</span></span>
<span id="cb33-15"><a href="performance-et-aspects-pratiques.html#cb33-15" tabindex="-1"></a>  <span class="fu">Reduce</span>(<span class="st">&quot;+&quot;</span>, resultat)  <span class="co"># Agréger les résultats obtenus sur les différents cœurs</span></span>
<span id="cb33-16"><a href="performance-et-aspects-pratiques.html#cb33-16" tabindex="-1"></a>}</span>
<span id="cb33-17"><a href="performance-et-aspects-pratiques.html#cb33-17" tabindex="-1"></a></span>
<span id="cb33-18"><a href="performance-et-aspects-pratiques.html#cb33-18" tabindex="-1"></a><span class="co"># Liste des cœurs à tester</span></span>
<span id="cb33-19"><a href="performance-et-aspects-pratiques.html#cb33-19" tabindex="-1"></a>liste_coeurs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">8</span>)</span>
<span id="cb33-20"><a href="performance-et-aspects-pratiques.html#cb33-20" tabindex="-1"></a></span>
<span id="cb33-21"><a href="performance-et-aspects-pratiques.html#cb33-21" tabindex="-1"></a><span class="co"># Initialisation du tableau des résultats</span></span>
<span id="cb33-22"><a href="performance-et-aspects-pratiques.html#cb33-22" tabindex="-1"></a>resultats_simples <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Cœurs <span class="ot">=</span> liste_coeurs, <span class="at">Temps =</span> <span class="cn">NA</span>, <span class="at">Speedup =</span> <span class="cn">NA</span>)</span>
<span id="cb33-23"><a href="performance-et-aspects-pratiques.html#cb33-23" tabindex="-1"></a></span>
<span id="cb33-24"><a href="performance-et-aspects-pratiques.html#cb33-24" tabindex="-1"></a><span class="co"># Temps de référence (séquentiel)</span></span>
<span id="cb33-25"><a href="performance-et-aspects-pratiques.html#cb33-25" tabindex="-1"></a>temps_seq <span class="ot">&lt;-</span> <span class="fu">system.time</span>(<span class="fu">tache_sequentielle</span>())[<span class="dv">3</span>]</span>
<span id="cb33-26"><a href="performance-et-aspects-pratiques.html#cb33-26" tabindex="-1"></a></span>
<span id="cb33-27"><a href="performance-et-aspects-pratiques.html#cb33-27" tabindex="-1"></a><span class="co"># Remplissage du tableau</span></span>
<span id="cb33-28"><a href="performance-et-aspects-pratiques.html#cb33-28" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(liste_coeurs)) {</span>
<span id="cb33-29"><a href="performance-et-aspects-pratiques.html#cb33-29" tabindex="-1"></a>  nb_coeurs <span class="ot">&lt;-</span> liste_coeurs[i]</span>
<span id="cb33-30"><a href="performance-et-aspects-pratiques.html#cb33-30" tabindex="-1"></a>  </span>
<span id="cb33-31"><a href="performance-et-aspects-pratiques.html#cb33-31" tabindex="-1"></a>  <span class="cf">if</span> (nb_coeurs <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb33-32"><a href="performance-et-aspects-pratiques.html#cb33-32" tabindex="-1"></a>    resultats_simples<span class="sc">$</span>Temps[i] <span class="ot">&lt;-</span> <span class="fu">round</span>(temps_seq, <span class="dv">4</span>)</span>
<span id="cb33-33"><a href="performance-et-aspects-pratiques.html#cb33-33" tabindex="-1"></a>    resultats_simples<span class="sc">$</span>Speedup[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb33-34"><a href="performance-et-aspects-pratiques.html#cb33-34" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb33-35"><a href="performance-et-aspects-pratiques.html#cb33-35" tabindex="-1"></a>    temps_par <span class="ot">&lt;-</span> <span class="fu">system.time</span>(<span class="fu">tache_parallele</span>(<span class="fl">1e4</span>, nb_coeurs))[<span class="dv">3</span>]</span>
<span id="cb33-36"><a href="performance-et-aspects-pratiques.html#cb33-36" tabindex="-1"></a>    resultats_simples<span class="sc">$</span>Temps[i] <span class="ot">&lt;-</span> <span class="fu">round</span>(temps_par, <span class="dv">4</span>)</span>
<span id="cb33-37"><a href="performance-et-aspects-pratiques.html#cb33-37" tabindex="-1"></a>    resultats_simples<span class="sc">$</span>Speedup[i] <span class="ot">&lt;-</span> <span class="fu">round</span>(temps_seq <span class="sc">/</span> temps_par, <span class="dv">2</span>)</span>
<span id="cb33-38"><a href="performance-et-aspects-pratiques.html#cb33-38" tabindex="-1"></a>  }</span>
<span id="cb33-39"><a href="performance-et-aspects-pratiques.html#cb33-39" tabindex="-1"></a>}</span>
<span id="cb33-40"><a href="performance-et-aspects-pratiques.html#cb33-40" tabindex="-1"></a></span>
<span id="cb33-41"><a href="performance-et-aspects-pratiques.html#cb33-41" tabindex="-1"></a><span class="co"># Affichage du tableau final</span></span>
<span id="cb33-42"><a href="performance-et-aspects-pratiques.html#cb33-42" tabindex="-1"></a>resultats_simples</span></code></pre></div>
<p>En effet, on observe que la version séquentielle de la fonction prend environ 0,32 secondes, tandis que la version parallèle devient de plus en plus lente à mesure qu’on augmente le nombre de cœurs. Le tableau récapitulatif montre ainsi que le speedup est inférieur à 1 dans tous les cas, ce qui signifie qu’il n’y a aucun gain de performance – au contraire, l’exécution parallèle est plus lente. Cela s’explique par le coût de la création du cluster, de la répartition des données, et de la communication entre les cœurs, qui devient significatif face à une tâche aussi légère. Ces résultats montrent clairement que le parallélisme n’est pas avantageux pour les tâches simples.</p>
</div>
<div id="efficacité" class="section level3 hasAnchor">
<h3>Efficacité<a href="performance-et-aspects-pratiques.html#efficacité" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>L’efficacité d’un calcul parallèle peut être définie comme le rapport entre le temps d’exécution séquentiel et le temps d’exécution parallèle, normalisé par le nombre de cœurs utilisés, et donc c’est égale au rapport du speedup sur le nombre de coeurs:</p>
<p><span class="math display">\[
E = \frac{S}{N_{\text{coeurs}}} = \frac{T_{\text{par}} \times N_{\text{coeurs}}}{T_{\text{seq}}}
\]</span></p>
<p>En d’autres termes, l’efficacité mesure combien de travail parallèle chaque cœur accomplit. Plus l’efficacité est élevée, plus le calcul est optimal avec un nombre donné de cœurs.</p>
<p>Au-delà d’un certain nombre de cœurs, l’ajout de ressources ne se traduit plus par un gain proportionnel de performance du fait du temps supplémentaire consacré à la coordination :
création des clusters, répartition des données, synchronisation des résultats… Ces opérations, bien que nécessaires, n’accélèrent pas directement le calcul.</p>
</div>
<div id="scalabilité" class="section level3 hasAnchor">
<h3>Scalabilité<a href="performance-et-aspects-pratiques.html#scalabilité" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La scalabilité est étroitement liée à l’efficacité, mais elle s’intéresse à l’évolution de la performance lorsqu’on augmente les ressources.</p>
<p>Elle mesure la capacité d’un programme à maintenir ou améliorer ses performances lorsqu’on augmente le nombre de cœurs, la taille des données ou la mémoire disponible.</p>
<ul>
<li>Si un programme est <strong>hautement scalable</strong>, le temps d’exécution diminue régulièrement à mesure qu’on ajoute des cœurs.</li>
<li>Si la scalabilité est <strong>faible</strong>, ajouter des ressources ne sert plus à rien au bout d’un certain point — voire ça ralentit à cause de la coordination nécessaire entre les threads (synchronisation, accès partagés, etc.).</li>
</ul>
</div>
</div>
<div id="défis-et-optimisation" class="section level2 hasAnchor">
<h2>Défis et optimisation<a href="performance-et-aspects-pratiques.html#défis-et-optimisation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Le calcul parallèle apporte des gains de performance, mais soulève plusieurs challenges qu’il faut gérer pour en tirer pleinement parti.</p>
<div id="overhead-surcharge" class="section level3 hasAnchor">
<h3>Overhead (surcharge)<a href="performance-et-aspects-pratiques.html#overhead-surcharge" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Description</strong><br />
L’overhead correspond au temps et aux ressources consommés par la gestion du parallélisme (création de workers, allocation mémoire, communication…).</p>
<p><strong>Exemples</strong><br />
- <strong>Partition des tâches</strong> : découpage et distribution des données entre cœurs<br />
- <strong>Allocation mémoire</strong> : copies multiples des objets<br />
- <strong>Communication</strong> : envoi/reception des résultats intermédiaires</p>
<p><strong>Bonnes pratiques</strong><br />
- Ajuster la <strong>taille des tâches</strong> pour amortir le coût de gestion<br />
- Choisir des <strong>algorithmes minimisant les échanges</strong> entre workers</p>
</div>
<div id="synchronisation" class="section level3 hasAnchor">
<h3>2. Synchronisation<a href="performance-et-aspects-pratiques.html#synchronisation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Description</strong><br />
Lorsque des tâches dépendent les unes des autres, les cœurs doivent attendre que certaines étapes soient terminées, ce qui freine le parallélisme.</p>
<p><strong>Exemples</strong><br />
- Attente d’un résultat avant de poursuivre<br />
- <strong>Deadlocks</strong> : blocage mutuel des workers<br />
- <strong>Race conditions</strong> : accès concurrent sans verrou</p>
<p><strong>Bonnes pratiques</strong><br />
- Réduire les <strong>dépendances</strong> entre tâches<br />
- Utiliser des <strong>verrous légers</strong> ou des structures immuables<br />
- Ajuster la <strong>granularité</strong> pour limiter les points de synchronisation (la granularité faisant référence à la taolle des sous taches distrinuées à chaque coeur)</p>
</div>
<div id="surcharge-mémoire" class="section level3 hasAnchor">
<h3>3. Surcharge mémoire<a href="performance-et-aspects-pratiques.html#surcharge-mémoire" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Description</strong><br />
Chaque worker peut créer sa propre copie des données, entraînant une forte consommation mémoire.</p>
<p><strong>Bonnes pratiques</strong><br />
- Privilégier des structures <strong>légères</strong> (e.g. <code>data.table</code>)<br />
- Éviter les copies inutiles (passer par référence si possible)<br />
- Fermer les clusters inactifs avec <code>stopCluster()</code></p>
</div>
<div id="communication-interprocessus" class="section level3 hasAnchor">
<h3>4. Communication inter‑processus<a href="performance-et-aspects-pratiques.html#communication-interprocessus" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Description</strong><br />
Le coût d’échange de données entre workers (ou nœuds) peut devenir significatif, surtout pour des volumes élevés.</p>
<p><strong>Bonnes pratiques</strong><br />
- Transférer <strong>uniquement</strong> les variables nécessaires<br />
- Regrouper les communications (batch messaging)<br />
- Favoriser des calculs <strong>indépendants</strong></p>
</div>
<div id="sécurité-des-données-parallélisme-distribué" class="section level3 hasAnchor">
<h3>5. Sécurité des données (parallélisme distribué)<a href="performance-et-aspects-pratiques.html#sécurité-des-données-parallélisme-distribué" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Description</strong><br />
Dans un cluster multi‑machines, les données transitent sur le réseau et doivent être protégées.</p>
<p><strong>Bonnes pratiques</strong><br />
- Utiliser des canaux sécurisés (SSH, VPN)<br />
- Chiffrer ou <strong>sérialiser</strong> les échanges critiques<br />
- Sauvegarder régulièrement les résultats intermédiaires</p>

</div>
</div>
</div>
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Footer</title>
</head>
<body>

  <div class="book-footer">
    © Exposé sur le calcul parallèle sur R | Réalisé dans le cadre du cours de Projet statistique avec R
  </div>

</body>
</html>
            </section>

          </div>
        </div>
      </div>
<a href="patterns-essentiels.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="bonnes-pratiques.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
